import{a as U,c as X,e as Y,g as Z,k as ee}from"./chunk-SFLG77T6.js";import{a as Q}from"./chunk-CMRIFXQY.js";import{$ as N,B as g,C as u,G as r,L as d,M as p,N as $,O as i,P as n,Q as V,R as z,S as A,T as v,U as f,V as l,W as o,X as b,Y as C,_ as D,aa as h,ba as j,ca as B,d as k,f as L,h as x,i as E,ia as R,ja as W,k as P,ka as q,l as M,la as G,ma as H,o as F,ta as J,va as K,w as T,x as O}from"./chunk-O3PZLU3E.js";var ne=t=>["/issue",t];function re(t,c){t&1&&(i(0,"div",8),o(1,"Failed to load issues"),n())}function oe(t,c){if(t&1&&(i(0,"tr")(1,"td"),o(2),n(),i(3,"td"),o(4),n(),i(5,"td"),o(6),h(7,"slice"),n(),i(8,"td")(9,"a",11),o(10,"View"),n()()()),t&2){let e=c.$implicit,a=c.index,s=l(2).ngIf;r(2),b((s.page-1)*10+a+1),r(2),b(e.title),r(2),C("",B(7,4,e.body,0,60),"..."),r(3),p("routerLink",N(8,ne,e.id))}}function ae(t,c){if(t&1&&(i(0,"table",9)(1,"thead")(2,"tr")(3,"th"),o(4,"#"),n(),i(5,"th"),o(6,"Title"),n(),i(7,"th"),o(8,"Preview"),n(),i(9,"th"),o(10,"Actions"),n()()(),i(11,"tbody"),d(12,oe,11,10,"tr",10),n()()),t&2){let e=l().ngIf;r(12),p("ngForOf",e.items)}}function se(t,c){if(t&1){let e=v();i(0,"button",15),f("click",function(){let s=g(e).$implicit,m=l(3);return u(m.goTo(s))}),o(1),n()}if(t&2){let e=c.$implicit,a=l(2).ngIf;$("active",e===a.page),r(),C(" ",e," ")}}function pe(t,c){if(t&1){let e=v();i(0,"div",12)(1,"button",13),f("click",function(){g(e);let s=l(2);return u(s.prev())}),o(2,"Prev"),n(),d(3,se,2,3,"button",14),i(4,"button",13),f("click",function(){g(e);let s=l(2);return u(s.next())}),o(5,"Next"),n()()}if(t&2){let e=l().ngIf;r(),p("disabled",e.page===1),r(2),p("ngForOf",e.pages),r(),p("disabled",e.page===e.totalPages)}}function ce(t,c){if(t&1&&(z(0),d(1,re,2,0,"div",5)(2,ae,13,1,"table",6)(3,pe,6,3,"div",7),A()),t&2){let e=c.ngIf;r(),p("ngIf",e.error),r(),p("ngIf",!e.error),r(),p("ngIf",e.totalPages>1)}}var he=(()=>{class t{service=T(Q);search=new Y("");page$=new k(1);pageSize=10;vm$=E([this.service.getIssues().pipe(x(e=>({issues:e,error:!1})),P(()=>L({issues:[],error:!0}))),this.search.valueChanges.pipe(F(""),M(300)),this.page$]).pipe(x(([e,a,s])=>{let m=e.issues.filter(w=>w.title.toLowerCase().includes((a||"").toLowerCase())),I=m.length,_=Math.max(1,Math.ceil(I/this.pageSize)),y=Math.min(s,_),S=(y-1)*this.pageSize,te=m.slice(S,S+this.pageSize);return{loading:!1,error:e.error,items:te,total:I,page:y,totalPages:_,pages:Array.from({length:_},(w,ie)=>ie+1)}}));goTo(e){this.page$.next(e)}next(){this.page$.next(this.page$.value+1)}prev(){this.page$.next(this.page$.value-1)}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=O({type:t,selectors:[["app-issue-list"]],standalone:!0,features:[D],decls:8,vars:4,consts:[[1,"page-title"],[1,"toolbar"],["placeholder","Search by title...",3,"formControl"],["routerLink","/create-issue"],[4,"ngIf"],["class","state error",4,"ngIf"],["class","issues-table",4,"ngIf"],["class","pagination",4,"ngIf"],[1,"state","error"],[1,"issues-table"],[4,"ngFor","ngForOf"],[1,"view-btn",3,"routerLink"],[1,"pagination"],[3,"click","disabled"],[3,"active","click",4,"ngFor","ngForOf"],[3,"click"]],template:function(a,s){a&1&&(i(0,"h2",0),o(1,"Issues"),n(),i(2,"div",1),V(3,"input",2),i(4,"a",3),o(5,"\u2795 Create"),n()(),d(6,ce,4,3,"ng-container",4),h(7,"async")),a&2&&(r(3),p("formControl",s.search),r(3),p("ngIf",j(7,2,s.vm$)))},dependencies:[H,R,W,q,G,ee,U,X,Z,K,J],styles:[".page-title[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin-bottom:12px}.toolbar[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:16px;input{flex:1;padding:8px 10px;border-radius:8px;border:1px solid var(--border)}a{background:var(--primary);color:#fff;padding:8px 14px;border-radius:8px;white-space:nowrap}}.issues-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--card);border-radius:10px;overflow:hidden;th,td{padding:10px 12px;text-align:left;font-size:14px;border-bottom:1px solid var(--border)}thead{background:#eef2ff}tbody tr:hover{background:#f8fafc}}.view-btn[_ngcontent-%COMP%]{background:var(--primary);color:#fff;padding:6px 10px;border-radius:6px;font-size:12px}.state[_ngcontent-%COMP%]{padding:12px;border-radius:8px;background:#f1f5f9;text-align:center}.error[_ngcontent-%COMP%]{background:#fee2e2;color:var(--danger)}.pagination[_ngcontent-%COMP%]{display:flex;gap:6px;justify-content:center;margin-top:12px;button{background:#eef2ff;color:var(--primary);border-radius:6px;padding:6px 10px;&.active{background:var(--primary);color:#fff}&:disabled{opacity:.5;cursor:not-allowed}}}"]})}return t})();export{he as IssueListComponent};
